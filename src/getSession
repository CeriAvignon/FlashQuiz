
/**
* <b>Recoupere une session à partir du serveur.</b>
* <p>
*
* @author Alexandra MOSHINA 
*
* @param idsession
*	L'id de la session à recouperer à partir de la BDD.
*
* @return La session demandé. 
*
*/
public Session getSession(int idsession) throws SQLException
	{
	
	try {
	Connection cnx=connecterDB(); 						//connection à la BDD 
						
	String query1="";
	String query2="";
	ResultSet res=null;	
	Session s = new Session();
	
		if(idsession){
			//on recoupere les donnees à partir de la BDD
			query1 = "SELECT ID_Session, ID_User, Opening_Date, Closing_Date, Type, Title, Password FROM Session_Metadata WHERE ID_Session=?;";
			PreparedStatement statement1 = cnx.prepareStatement(query1);
			statement1.setString(1, idsession);
			res = statement1.executeQuery();
				
			//recupere l'id de la session	
			s.setId(res.getInt(1));
			//recupere l'id de l'utilisateur
			s.setAuthor(res.getInt(2));
			//recupere la date de debut
			s.setDebut(res.getDate(3));
			//recupere la date de fin
			s.setFin(res.getDate(4));
			//recupere le type de session
			s.setType(res.getBoolean(5));
			//recupere le nom de session
			s.setName(res.getString(6));
			//recupere le mot de passe
			s.setPassword(res.getString(7));
			res.close();
			
			//on recoupere les ids de la liste à partir de la BDD
			query2 = "SELECT ID_Liste FROM Session_Content WHERE ID_Session=?;";
			PreparedStatement statement2 = cnx.prepareStatement(query2);
			statement2.setString(1, idsession);
			res = statement2.executeQuery();
			
			// creation d'un tableau pour stocker les ids de la liste
			int [] idslist new int[0];

			// s'il y a des ids on les stocke
		        while (res.next()) {
				idslist.add(res.getInt(1));
			}
			// recoupere le tableau des ids du liste
			s.setList(idslist);

			res.close();

		}

    } catch (SQLException e) 
	{
    	e.printStackTrace();    
    	}		

 	return s;
}
